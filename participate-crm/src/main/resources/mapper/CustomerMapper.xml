<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.participate.dao.CustomerMapper">
<!--添加方法-->
    <insert id="add">
        INSERT INTO
        customer(salesman_id,customer_name,customer_phone_number,customer_sex,customer_address,customer_create_time)
        VALUES
        (#{salesman_id},#{customer_name},#{customer_phone_number},#{customer_sex},#{customer_address},#{customer_create_time})
    </insert>
<!--根据id查询一条信息-->
    <select id="getById" resultType="com.participate.entity.CustomerModel">
		SELECT * FROM customer WHERE customer_id = #{0}
	</select>
<!--查询所有信息-->
    <select id="selA" parameterType="map" resultType="com.participate.entity.CustomerModel">
        SELECT customer_id,salesman_id,customer_name,customer_phone_number,customer_sex,customer_address,customer_create_time,customer_del FROM customer
        <where>
            <if test="customer_id != null">
                AND customer_id=#{customer_id}
            </if>
            <if test="salesman_id != null">
                AND salesman_id=#{salesman_id}
            </if>
            <if test="customer_name != null and customer_name != ''">
                AND customer_name like CONCAT('%', #{customer_name}, '%')
            </if>
            <if test="customer_phone_number != null and customer_phone_number != ''">
                AND customer_phone_number like CONCAT('%', #{customer_phone_number} ,'%')
            </if>
            <if test="customer_sex != null and customer_sex != ''">
                AND customer_sex = #{customer_sex}
            </if>
            <if test="customer_address != null and customer_address != ''">
                AND customer_address like CONCAT('%', #{customer_address} ,'%')
            </if>
            <if test="customer_create_time != null and customer_create_time != ''">
                AND Date(customer_create_time) =  Date(#{customer_create_time})
            </if>
            <if test="customer_del != null">
                AND customer_del=#{customer_del}
            </if>
        </where>
    </select>
<!--根据id修改某条信息-->
    <update id="update">
        UPDATE customer
        <set>
            <if test="salesman_id != null">
                salesman_id = #{salesman_id},
            </if>
            <if test="customer_name != null">
                customer_name = #{customer_name},
            </if>
            <if test="customer_phone_number != null">
                customer_phone_number = #{customer_phone_number},
            </if>
            <if test="customer_sex != null">
                customer_sex = #{customer_sex},
            </if>
            <if test="customer_address != null">
                customer_address = #{customer_address},
            </if>
            <if test="customer_create_time != null">
                customer_create_time = #{customer_create_time},
            </if>
            <if test="customer_del != null">
                customer_del = #{customer_del}
            </if>
        </set>
        WHERE customer_id = #{customer_id}
    </update>
<!--根据id删除客户信息（物理删除）-->
    <delete id="delById" parameterType="java.lang.Integer">DELETE FROM customer WHERE customer_id = #{0}</delete>
<!--根据id删除客户信息（逻辑删除删除）-->
   <!-- <update id="del">
        UPDATE customer set customer_del=1 WHERE customer_id = #{customer_id}
    </update>-->
</mapper>

